<!DOCTYPE html>
<html lang="ko" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.43" />
    <meta name="description" content="hugo contents for keyolk.github.io">
<meta name="author" content="keyolk">

    <link rel="shortcut icon" href="https://keyolk.github.io/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="https://keyolk.github.io/images/favicon.png" type="image/x-icon" />

    <title>proxy :: Personal Documentation</title>
    
    
    <link href="https://keyolk.github.io/css/nucleus.css?1551920893" rel="stylesheet">
    <link href="https://keyolk.github.io/css/font-awesome.min.css?1551920893" rel="stylesheet">
    <link href="https://keyolk.github.io/css/hybrid.css?1551920893" rel="stylesheet">
    <link href="https://keyolk.github.io/css/featherlight.min.css?1551920893" rel="stylesheet">
    <link href="https://keyolk.github.io/css/perfect-scrollbar.min.css?1551920893" rel="stylesheet">
    <link href="https://keyolk.github.io/css/horsey.css?1551920893" rel="stylesheet">
    <link href="https://keyolk.github.io/css/theme.css?1551920893" rel="stylesheet">
    <link href="https://keyolk.github.io/css/hugo-theme.css?1551920893" rel="stylesheet">
    
      <link href="https://keyolk.github.io/css/theme-blue.css?1551920893" rel="stylesheet">
    

    <script src="https://keyolk.github.io/js/jquery-2.x.min.js?1551920893"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-5222442308579087",
    enable_page_level_ads: true
  });
</script>

  </head>
  <body class="" data-url="/workspace/proxy/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      
<a href="https://keyolk.github.io/" style="color: white; margin-top:10px;">
  <div style="margin-top:5px; font-size: 25px;"><b>keyolk</b></div>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="https://keyolk.github.io/js/lunr.min.js?1551920893"></script>
<script type="text/javascript" src="https://keyolk.github.io/js/horsey.js?1551920893"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/keyolk.github.io";
    
</script>
<script type="text/javascript" src="https://keyolk.github.io/js/search.js?1551920893"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/workspace/" title="Workspace" class="dd-item 
        parent
        
        
        ">
      <a href="https://keyolk.github.io/workspace/">
          Workspace
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/workspace/fish/" title="fish" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/fish/">
        fish
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/proxy/" title="proxy" class="dd-item active">
        <a href="https://keyolk.github.io/workspace/proxy/">
        proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/vi/" title="vi" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/vi/">
        vi
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/blog/" title="blog" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/blog/">
        blog
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/gcloud/" title="gcloud" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/gcloud/">
        gcloud
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/personal/" title="personal" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/personal/">
        personal
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/prefix/" title="prefix" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/prefix/">
        prefix
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/algorithm/" title="Algorithm" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/algorithm/">
          Algorithm
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/algorithm/datastructure/" title="datastructure" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/algorithm/datastructure/">
          datastructure
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/balanced_tree/" title="balanced tree" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/balanced_tree/">
        balanced tree
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/heap/" title="heap" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/heap/">
        heap
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/priority_queue/" title="priority queue" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/priority_queue/">
        priority queue
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/queue/" title="queue" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/queue/">
        queue
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/stack/" title="stack" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/stack/">
        stack
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/tree/" title="tree" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/tree/">
        tree
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/graph/" title="graph" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/graph/">
        graph
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/algorithm_pattern/" title="algorithm pattern" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/algorithm_pattern/">
        algorithm pattern
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/gc/" title="gc" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/gc/">
        gc
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/sorting/" title="sorting" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/sorting/">
        sorting
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/network/" title="network" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/network/">
        network
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/computational_geometry/" title="computational geometry" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/computational_geometry/">
        computational geometry
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/string_matching/" title="string matching" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/string_matching/">
        string matching
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/mathematics/" title="mathematics" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/mathematics/">
        mathematics
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/etc/" title="etc" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/etc/">
        etc
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/architecture/" title="Architecture" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/architecture/">
          Architecture
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/architecture/database/" title="database" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/architecture/database/">
          database
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/architecture/database/rdb/" title="rdb" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/database/rdb/">
        rdb
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/database/nosql/" title="nosql" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/database/nosql/">
        nosql
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/monitoring/" title="monitoring" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/monitoring/">
        monitoring
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/distributed_system/" title="distributed system" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/architecture/distributed_system/">
          distributed system
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/bully/" title="bully" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/bully/">
        bully
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/gossip/" title="gossip" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/gossip/">
        gossip
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/paxos/" title="paxos" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/paxos/">
        paxos
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/raft/" title="raft" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/raft/">
        raft
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/zab/" title="zab" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/zab/">
        zab
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/msa/" title="msa" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/msa/">
        msa
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/serverless/" title="serverless" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/serverless/">
        serverless
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/system/" title="System" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/">
          System
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/system/storage/" title="Storage" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/storage/">
          Storage
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/system/storage/raid/" title="raid" class="dd-item ">
        <a href="https://keyolk.github.io/system/storage/raid/">
        raid
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/system/virtual_machine/" title="Virtual Miachine" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/virtual_machine/">
          Virtual Miachine
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/system/container/" title="Container" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/container/">
          Container
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/system/container/network/" title="network" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/network/">
        network
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/security/" title="security" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/security/">
        security
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/inside/" title="inside" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/inside/">
        inside
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/kubernetes/" title="kubernetes" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/kubernetes/">
        kubernetes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/standard/" title="standard" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/standard/">
        standard
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/system/linux/" title="linux" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/linux/">
          linux
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/system/linux/criu/" title="criu" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/criu/">
        criu
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/cgroup/" title="cgroup" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/cgroup/">
        cgroup
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/metric/" title="metric" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/metric/">
        metric
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/namespace/" title="namespace" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/namespace/">
        namespace
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/proxy/" title="proxy" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/proxy/">
        proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/vagrant/" title="vagrant" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/vagrant/">
        vagrant
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/deadlock/" title="deadlock" class="dd-item ">
        <a href="https://keyolk.github.io/system/deadlock/">
        deadlock
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/thread/" title="thread" class="dd-item ">
        <a href="https://keyolk.github.io/system/thread/">
        thread
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/network/" title="Network" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/network/">
          Network
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/network/arp/" title="arp" class="dd-item ">
        <a href="https://keyolk.github.io/network/arp/">
        arp
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/dns/" title="dns" class="dd-item ">
        <a href="https://keyolk.github.io/network/dns/">
        dns
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/http/" title="http" class="dd-item ">
        <a href="https://keyolk.github.io/network/http/">
        http
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/osi7/" title="osi7" class="dd-item ">
        <a href="https://keyolk.github.io/network/osi7/">
        osi7
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/virtual_network/" title="virtual network" class="dd-item ">
        <a href="https://keyolk.github.io/network/virtual_network/">
        virtual network
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/security/" title="Security" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/security/">
          Security
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/security/vulnerability/" title="vulnerability" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/security/vulnerability/">
          vulnerability
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/security/vulnerability/cve-2016-9962/" title="CVE-2016-9962" class="dd-item ">
        <a href="https://keyolk.github.io/security/vulnerability/cve-2016-9962/">
        CVE-2016-9962
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security/openscap/" title="openscap" class="dd-item ">
        <a href="https://keyolk.github.io/security/openscap/">
        openscap
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security/rootkit/" title="rootkit" class="dd-item ">
        <a href="https://keyolk.github.io/security/rootkit/">
        rootkit
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/language/" title="Language" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/language/">
          Language
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/language/functional_programming/" title="functional programming" class="dd-item ">
        <a href="https://keyolk.github.io/language/functional_programming/">
        functional programming
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/language/lambda/" title="lambda" class="dd-item ">
        <a href="https://keyolk.github.io/language/lambda/">
        lambda
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/language/regular_expression/" title="regular expression" class="dd-item ">
        <a href="https://keyolk.github.io/language/regular_expression/">
        regular expression
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/language/shellscript/" title="shellscript" class="dd-item ">
        <a href="https://keyolk.github.io/language/shellscript/">
        shellscript
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li class="" role=""> 
                  <a class="padding" href="https://github.com/keyolk"><i class='fa fa-github'></i> GitHub</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://linkedin.com/in/keyolk"><i class='fa fa-linkedin'></i> LinkedIn</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable sticky-parent">
              
              <div class="sticky-spacer">
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" href="http://prose.io/#keyolk/keyolk.github.io/edit/hugo/content/workspace/proxy.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='https://keyolk.github.io/'>keyolk's page</a> > <a href='https://keyolk.github.io/workspace/'>Workspace</a> > proxy
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#intro">Intro</a></li>
<li><a href="#openssh">OpenSSH</a>
<ul>
<li><a href="#remote-host">Remote Host</a></li>
<li><a href="#proxy">Proxy</a>
<ul>
<li><a href="#forward-proxy">Forward Proxy</a></li>
<li><a href="#backward-proxy">Backward Proxy</a></li>
<li><a href="#dynamic-proxy">Dynamic Proxy</a></li>
<li><a href="#x11-forward">X11 Forward</a></li>
</ul></li>
</ul></li>
<li><a href="#redosocks">Redosocks</a></li>
<li><a href="#proxy-auto-config">Proxy Auto Config</a></li>
<li><a href="#vagrant">Vagrant</a>
<ul>
<li><a href="#plugin">Plugin</a></li>
<li><a href="#trouble-shooting">Trouble Shooting</a></li>
</ul></li>
<li><a href="#synergy">Synergy</a>
<ul>
<li><a href="#configuration">Configuration</a></li>
</ul></li>
<li><a href="#chrome">Chrome</a>
<ul>
<li><a href="#hsts">HSTS</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>proxy</h1>
          

        



<h2 id="intro">Intro</h2>

<p>사무실용 환경 설정에 필요한 Step 정리.</p>

<ul>
<li>Corporation Firewall에 따른 개인용 Transparent Proxy.</li>
<li>이종 OS간 Keyboard/Mouse Sharing.</li>
<li>내부 가상화 환경.</li>
<li>SSH.</li>
</ul>

<h2 id="openssh">OpenSSH</h2>

<h3 id="remote-host">Remote Host</h3>

<p>Configuration File을 통해 Remote Host를 관리하면 편하다.</p>

<pre><code class="language-bash">$ cat ~/.ssh/config
</code></pre>

<pre><code>Host remote1
  Hostname 1.2.3.4
  User root
  IdentityFile remote1
  ForwardX11 yes
  ProxyCommand ssh proxy nc %h %p
</code></pre>

<p>위의 예는 SSH를 연결하면서 X11Forward와 Dynamic Proxy 연결을 같이 한다.</p>

<p>IdentityFile을 별도로 만들경우 아래와 같이 사용 가능하다.</p>

<pre><code class="language-bash">$ ssh -i $IDENTITY_FILE $REMOTE
</code></pre>

<h3 id="proxy">Proxy</h3>

<h4 id="forward-proxy">Forward Proxy</h4>

<pre><code class="language-bash">$ ssh -N -f -L 0.0.0.0:8080:1.2.3.4:8080 $REMOTE
</code></pre>

<h4 id="backward-proxy">Backward Proxy</h4>

<pre><code class="language-bash">$ ssh -R 0.0.0.0:8080:1.2.3.4:8080 $REMOTE
</code></pre>

<p>0.0.0.0에 port를 binding 하려면 아래 설정이 필요하다.</p>

<pre><code class="language-bash">$ cat /etc/ssh/sshd_config | grep -i gatewayports
GatewayPorts yes
</code></pre>

<h4 id="dynamic-proxy">Dynamic Proxy</h4>

<pre><code class="language-bash">$ ssh -D 8080 $REMOTE
</code></pre>

<h4 id="x11-forward">X11 Forward</h4>

<pre><code class="language-bash">$ ssh -X $REMOTE
</code></pre>

<p>XAuth를 Skip한다.</p>

<pre><code class="language-bash">$ ssh -Y $REMOTE
</code></pre>

<p>관련 설정</p>

<pre><code class="language-bash">$ cat /etc/ssh/sshd_config | grep -i x11
X11Forwarding yes
#X11DisplayOffset 10
X11UseLocalHost yes
</code></pre>

<h2 id="redosocks">Redosocks</h2>

<p>Corporation Firewall로 인해 internet으로 가는 pakcet은 모두 Proxy를 거쳐가야한다.
HTTP proxy를 일일이 등록하는건 힘드므로,
개인용 Transparent Proxy를 구축한다.</p>

<pre><code class="language-bash"># pacman -Sy redsocks
</code></pre>

<pre><code class="language-bash"># vi /etc/redsocks.conf
</code></pre>

<pre><code class="language-bash">base {
	log_debug = off;
	log_info = on;
	log = stderr;
	daemon = on;
	redirector = iptables;
}

redsocks {
	local_ip = 0.0.0.0;
	local_port = 10080;

	ip = proxy;
	port = 8080;

	type = http-relay;
}

redsocks {
	local_ip = 0.0.0.0;
	local_port = 10443;

	ip = proxy;
	port = 8080;

  type = http-connect;
}
</code></pre>

<pre><code class="language-bash"># systemctl enable redsocks
# systemctl start redsocks
</code></pre>

<p>위와 같이 구성하면 redsocks는 10080/10443으로 오는 packet을
SOCKS channel을 통해 모두 proxy:8080으로 보내게된다.</p>

<pre><code class="language-bash">#!/bin/bash

iptables -t nat -N PROXY
iptables -t nat -F PROXY
iptables -t nat -I OUTPUT 1 -j PROXY
iptables -t nat -I PREROUTING 1 -j PROXY

for network in `ip a | grep 'inet ' | grep -v 'inet6' | awk '{print $2}'`;
do
    sudo iptables -t nat -A PROXY -j RETURN --dest $network -p tcp
done

iptables -t nat -A PROXY -p tcp --dport 80 -j REDIRECT --to 10080
iptables -t nat -A PROXY -p tcp --dport 443 -j REDIRECT --to 10443
</code></pre>

<p>위와 같이하면 내부 network을 제외,
외부로 나가는 모든 HTTP/HTTPS packet은 각기 10080/10443을 통해 proxy로 가게된다.</p>

<h2 id="proxy-auto-config">Proxy Auto Config</h2>

<p>내부 System과 외부 System이 혼재되어 있을때 이를 모두 iptable를 통해 proxy 처리하려면 힘들다.
간단한 작업은 PAC를 통해할 수 있다.
또한 특정 target과 연동되어있는 System의 경우 Dynamic Proxy를 통해 VPN과같은 효과를 사용해야한다.</p>

<p>아래 10000 port는 target system에 대해 VPN endpoint가 된다.</p>

<pre><code class="language-bash">ssh -N -f -D :10000 target

</code></pre>

<p>아래와 같이 URI/IP에 따라 경유되는 channel을 바꿔줄 수 있다.</p>

<pre><code class="language-pac">GATEWAY_TARGET=&quot;SOCKS localhost:10000; DIRECT&quot;;
GATEWAY_PROXY=&quot;proxy:8080;&quot;

function FindProxyForURL(url, host)
{
    if(host==&quot;127.0.0.1&quot; || host==&quot;localhost&quot;) return &quot;DIRECT&quot;;

    if(host==&quot;1.2.3.4&quot;) return GATEWAY_TARGET;
    if(host==&quot;example-1.org&quot; || dnsDomainIs(host, &quot;.example-1.org&quot;)) return GATEWAY_TARGET;

    if(host==&quot;5.6.7.8&quot;) return GATEWAY_PROXY;
    if(host==&quot;example-2.org&quot; || dnsDomainIs(host, &quot;.example-2.org&quot;)) return GATEWAY_PROXY;

    return GATEWAY_PROXY;
}
</code></pre>

<p>위 pac를 Browser나 NetworkManager의 Proxy설정에 반영하면
HTTP/HTTPS packetㅇ네 대해서 위에 정의한대로 Routing 시켜준다.</p>

<h2 id="vagrant">Vagrant</h2>

<h3 id="plugin">Plugin</h3>

<p>내 경우 보통 아래 plugin들을 사용한다.</p>

<pre><code>$ vagrant plugin install landrush vagrant-cachier vagrant-triggers vagrant-vbguest  vagrant-proxyconf vagrant-ca-certificates
</code></pre>

<p>landrush는 vagrant instance들과 host machine 사이에
DNS를 구축하는걸 도와준다.</p>

<p>구체적으론 resolveconf와 dnsmasq를 이용한 구성이다.
Arch 등 일부 OS에서는 자동으로 dnsmasq 설치와 설정을 처리해주지 않으므로,
직접 구성해줘야 한다.</p>

<p>openresolv 경우,</p>

<pre><code># vi /etc/resolv.conf.head
</code></pre>

<pre><code>nameserver 127.0.0.1
</code></pre>

<pre><code># resolveconf -u
</code></pre>

<p>위와 같이 persist한 DNS 설정을 추가할 수 있다.</p>

<p>dnsmasq는,</p>

<pre><code># vi /etc/dnsmasq.conf
</code></pre>

<p>위 설정에 아래 line을 추가하면 .vagrant의 TLD를 +
10053 port에서 service하는 landrush에 물어보도록 할 수 있다.</p>

<pre><code>server=/.vagrant/127.0.0.1#10053
</code></pre>

<h3 id="trouble-shooting">Trouble Shooting</h3>

<pre><code>Failed to open a session for the virtual machine seconion-standalone.

Implementation of the USB 2.0 controller not found!

Because the USB 2.0 controller state is part of the saved VM state, the VM cannot be started. To fix this problem, either install the 'Oracle VM VirtualBox Extension Pack' or disable USB 2.0 support in the VM settings (VERR_NOT_FOUND).

Result Code: NS_ERROR_FAILURE (0x80004005)
Component: Console
Interface: IConsole {8ab7c520-2442-4b66-8d74-4ff1e195d2b6}
</code></pre>

<pre><code>config.vm.provider &quot;virtualbox&quot; do |vb|
  vb.customize [&quot;modifyvm&quot;, :id, &quot;--usb&quot;, &quot;on&quot;]
  vb.customize [&quot;modifyvm&quot;, :id, &quot;--usbehci&quot;, &quot;off&quot;]
end
</code></pre>

<pre><code>No usable default provider could be found for your system.

Vagrant relies on interactions with 3rd party systems, known as
&quot;providers&quot;, to provide Vagrant with resources to run development
environments. Examples are VirtualBox, VMware, Hyper-V.

The easiest solution to this message is to install VirtualBox, which
is available for free on all major platforms.

If you believe you already have a provider available, make sure it
is properly installed and configured. You can see more details about
why a particular provider isn't working by forcing usage with
`vagrant up --provider=PROVIDER`, which should give you a more specific
error message for that particular provider.

</code></pre>

<p>여러가지 이유가 있겠지만
지원하지 않는 version의 driver만 설치되어 있을 경우에도 발생할 수 있다.
driver의 version을 낮추거나 vagrant의 version을 높여도 되지만.
다소 naive한 해결 방법이 존재한다.</p>

<pre><code class="language-bash">$ cd /opt/vagrant/embedded/gems/gems/vagrant-1.8.4/plugins/providers/virtualbox/driver/
$ ls
base.rb  version_4_0.rb  version_4_2.rb  version_5_0.rb
meta.rb  version_4_1.rb  version_4_3.rb
$ cp version_5_0.rb version_5_1.rb

$ cat version_5_1.rb| grep 5_0
      class Version_5_0 &lt; Base
          @logger = Log4r::Logger.new(&quot;vagrant::provider::virtualbox_5_0&quot;)

$ cat meta.rb| grep -A 7 'driver_map  '
          driver_map   = {
            &quot;4.0&quot; =&gt; Version_4_0,
            &quot;4.1&quot; =&gt; Version_4_1,
            &quot;4.2&quot; =&gt; Version_4_2,
            &quot;4.3&quot; =&gt; Version_4_3,
            &quot;5.0&quot; =&gt; Version_5_0,
          }

$ cat ../plugin.rb| grep -A 8 'module Driver'
    module Driver
      autoload :Meta, File.expand_path(&quot;../driver/meta&quot;, __FILE__)
      autoload :Version_4_0, File.expand_path(&quot;../driver/version_4_0&quot;, __FILE__)
      autoload :Version_4_1, File.expand_path(&quot;../driver/version_4_1&quot;, __FILE__)
      autoload :Version_4_2, File.expand_path(&quot;../driver/version_4_2&quot;, __FILE__)
      autoload :Version_4_3, File.expand_path(&quot;../driver/version_4_3&quot;, __FILE__)
      autoload :Version_5_0, File.expand_path(&quot;../driver/version_5_0&quot;, __FILE__)
    end
</code></pre>

<p>위에서 보듯이 3개 file을 수정해주면 정상적으로 실행 가능하다.</p>

<h2 id="synergy">Synergy</h2>

<p>이런저런 이유로 Windows와 Linux Machine을 같이 써야한다.
Synergy를 사용하여 이종 OS간 Keyboard 및 Mouse, Clipboard를 공유할 수 있다.</p>

<p>아래 URI에서 가입 및 구매가 필요하다.</p>

<p><a href="https://symless.com/synergy/">https://symless.com/synergy/</a></p>

<h3 id="configuration">Configuration</h3>

<pre><code class="language-bash"># pacman -Sy synergy
</code></pre>

<p>기본 Monitor 배치 구성을 먼저 한다.</p>

<pre><code class="language-bash">$ vi /etc/synergy.conf
</code></pre>

<pre><code>section: screens
  keyolk-arch:
	keyolk-windows:
end

section: links
	keyolk-arch:
		right = keyolk-windows
	keyolk-windows:
		left  = keyolk-arch
end
</code></pre>

<p>Synergy는 Client/Server 구조를 이뤄져있다.
실제 Keyboard와 Mouse가 연결되어 있는 쪽이 Server가 된다.</p>

<p>Server 구동.</p>

<pre><code>$ systemctl enable synergys
$ systemctl start synergys
</code></pre>

<p>Client에서 synergy를 설치 후 Server로 접속하면 된다.</p>

<h2 id="chrome">Chrome</h2>

<h3 id="hsts">HSTS</h3>

<p>Private Network에서 Corporation Certificate를 사용하는 경우
HSTS로 인해 정상적으로 Browsing을 못할 수 있다.
Chrome의 경우 borwser에서 해당 domain의 HSTS 정보를 삭제해야한다.</p>

<pre><code class="language-bash">chrome://net-internals/#hsts
</code></pre>

<hr>
<footer class=" footline">
  
  written by <i class='fa fa-user'></i> <a href="mailto:keyolk@gmail.com">Chanhun Jeong</a>
  
  on <i class='fa fa-calendar'></i> 11/10/2017
  
  
</footer>
<div id="disqus_thread"></div>
<script type="text/javascript">
(function() {
    
    
    if (window.location.hostname == "localhost")
        return;
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'keyolk';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="https://keyolk.github.io/workspace/fish/" title="fish"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="https://keyolk.github.io/workspace/vi/" title="vi" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://keyolk.github.io/js/clipboard.min.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/perfect-scrollbar.min.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/perfect-scrollbar.jquery.min.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/jquery.sticky-kit.min.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/featherlight.min.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/html5shiv-printshiv.min.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/highlight.pack.js?1551920893"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://keyolk.github.io/js/modernizr.custom.71422.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/learn.js?1551920893"></script>
    <script src="https://keyolk.github.io/js/hugo-learn.js?1551920893"></script>

    <link href="https://keyolk.github.io/mermaid/mermaid.css?1551920893" type="text/css" rel="stylesheet" />
    <script src="https://keyolk.github.io/mermaid/mermaid.js?1551920893"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-77710672-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

