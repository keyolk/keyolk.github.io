<!DOCTYPE html>
<html lang="ko" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.43" />
    <meta name="description" content="hugo contents for keyolk.github.io">
<meta name="author" content="keyolk">

    <link rel="shortcut icon" href="https://keyolk.github.io/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="https://keyolk.github.io/images/favicon.png" type="image/x-icon" />

    <title>namespace :: Personal Documentation</title>
    
    
    <link href="https://keyolk.github.io/css/nucleus.css?1551920894" rel="stylesheet">
    <link href="https://keyolk.github.io/css/font-awesome.min.css?1551920894" rel="stylesheet">
    <link href="https://keyolk.github.io/css/hybrid.css?1551920894" rel="stylesheet">
    <link href="https://keyolk.github.io/css/featherlight.min.css?1551920894" rel="stylesheet">
    <link href="https://keyolk.github.io/css/perfect-scrollbar.min.css?1551920894" rel="stylesheet">
    <link href="https://keyolk.github.io/css/horsey.css?1551920894" rel="stylesheet">
    <link href="https://keyolk.github.io/css/theme.css?1551920894" rel="stylesheet">
    <link href="https://keyolk.github.io/css/hugo-theme.css?1551920894" rel="stylesheet">
    
      <link href="https://keyolk.github.io/css/theme-blue.css?1551920894" rel="stylesheet">
    

    <script src="https://keyolk.github.io/js/jquery-2.x.min.js?1551920894"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-5222442308579087",
    enable_page_level_ads: true
  });
</script>

  </head>
  <body class="" data-url="/system/linux/namespace/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      
<a href="https://keyolk.github.io/" style="color: white; margin-top:10px;">
  <div style="margin-top:5px; font-size: 25px;"><b>keyolk</b></div>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="https://keyolk.github.io/js/lunr.min.js?1551920894"></script>
<script type="text/javascript" src="https://keyolk.github.io/js/horsey.js?1551920894"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/keyolk.github.io";
    
</script>
<script type="text/javascript" src="https://keyolk.github.io/js/search.js?1551920894"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/workspace/" title="Workspace" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/workspace/">
          Workspace
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/workspace/fish/" title="fish" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/fish/">
        fish
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/proxy/" title="proxy" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/proxy/">
        proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/vi/" title="vi" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/vi/">
        vi
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/blog/" title="blog" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/blog/">
        blog
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/gcloud/" title="gcloud" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/gcloud/">
        gcloud
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/personal/" title="personal" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/personal/">
        personal
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/workspace/prefix/" title="prefix" class="dd-item ">
        <a href="https://keyolk.github.io/workspace/prefix/">
        prefix
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/algorithm/" title="Algorithm" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/algorithm/">
          Algorithm
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/algorithm/datastructure/" title="datastructure" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/algorithm/datastructure/">
          datastructure
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/balanced_tree/" title="balanced tree" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/balanced_tree/">
        balanced tree
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/heap/" title="heap" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/heap/">
        heap
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/priority_queue/" title="priority queue" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/priority_queue/">
        priority queue
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/queue/" title="queue" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/queue/">
        queue
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/stack/" title="stack" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/stack/">
        stack
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/tree/" title="tree" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/tree/">
        tree
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/datastructure/graph/" title="graph" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/datastructure/graph/">
        graph
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/algorithm_pattern/" title="algorithm pattern" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/algorithm_pattern/">
        algorithm pattern
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/gc/" title="gc" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/gc/">
        gc
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/sorting/" title="sorting" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/sorting/">
        sorting
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/network/" title="network" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/network/">
        network
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/computational_geometry/" title="computational geometry" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/computational_geometry/">
        computational geometry
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/string_matching/" title="string matching" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/string_matching/">
        string matching
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/mathematics/" title="mathematics" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/mathematics/">
        mathematics
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/algorithm/etc/" title="etc" class="dd-item ">
        <a href="https://keyolk.github.io/algorithm/etc/">
        etc
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/architecture/" title="Architecture" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/architecture/">
          Architecture
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/architecture/database/" title="database" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/architecture/database/">
          database
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/architecture/database/rdb/" title="rdb" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/database/rdb/">
        rdb
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/database/nosql/" title="nosql" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/database/nosql/">
        nosql
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/monitoring/" title="monitoring" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/monitoring/">
        monitoring
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/distributed_system/" title="distributed system" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/architecture/distributed_system/">
          distributed system
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/bully/" title="bully" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/bully/">
        bully
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/gossip/" title="gossip" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/gossip/">
        gossip
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/paxos/" title="paxos" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/paxos/">
        paxos
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/raft/" title="raft" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/raft/">
        raft
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/distributed_system/zab/" title="zab" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/distributed_system/zab/">
        zab
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/msa/" title="msa" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/msa/">
        msa
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/architecture/serverless/" title="serverless" class="dd-item ">
        <a href="https://keyolk.github.io/architecture/serverless/">
        serverless
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/system/" title="System" class="dd-item 
        parent
        
        
        ">
      <a href="https://keyolk.github.io/system/">
          System
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/system/storage/" title="Storage" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/storage/">
          Storage
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/system/storage/raid/" title="raid" class="dd-item ">
        <a href="https://keyolk.github.io/system/storage/raid/">
        raid
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/system/virtual_machine/" title="Virtual Miachine" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/virtual_machine/">
          Virtual Miachine
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/system/container/" title="Container" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/system/container/">
          Container
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/system/container/network/" title="network" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/network/">
        network
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/security/" title="security" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/security/">
        security
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/inside/" title="inside" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/inside/">
        inside
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/kubernetes/" title="kubernetes" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/kubernetes/">
        kubernetes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/container/standard/" title="standard" class="dd-item ">
        <a href="https://keyolk.github.io/system/container/standard/">
        standard
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/system/linux/" title="linux" class="dd-item 
        parent
        
        
        ">
      <a href="https://keyolk.github.io/system/linux/">
          linux
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/system/linux/criu/" title="criu" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/criu/">
        criu
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/cgroup/" title="cgroup" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/cgroup/">
        cgroup
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/metric/" title="metric" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/metric/">
        metric
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/namespace/" title="namespace" class="dd-item active">
        <a href="https://keyolk.github.io/system/linux/namespace/">
        namespace
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/proxy/" title="proxy" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/proxy/">
        proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/linux/vagrant/" title="vagrant" class="dd-item ">
        <a href="https://keyolk.github.io/system/linux/vagrant/">
        vagrant
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/deadlock/" title="deadlock" class="dd-item ">
        <a href="https://keyolk.github.io/system/deadlock/">
        deadlock
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/system/thread/" title="thread" class="dd-item ">
        <a href="https://keyolk.github.io/system/thread/">
        thread
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/network/" title="Network" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/network/">
          Network
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/network/arp/" title="arp" class="dd-item ">
        <a href="https://keyolk.github.io/network/arp/">
        arp
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/dns/" title="dns" class="dd-item ">
        <a href="https://keyolk.github.io/network/dns/">
        dns
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/http/" title="http" class="dd-item ">
        <a href="https://keyolk.github.io/network/http/">
        http
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/osi7/" title="osi7" class="dd-item ">
        <a href="https://keyolk.github.io/network/osi7/">
        osi7
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/virtual_network/" title="virtual network" class="dd-item ">
        <a href="https://keyolk.github.io/network/virtual_network/">
        virtual network
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/security/" title="Security" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/security/">
          Security
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/security/vulnerability/" title="vulnerability" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/security/vulnerability/">
          vulnerability
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/security/vulnerability/cve-2016-9962/" title="CVE-2016-9962" class="dd-item ">
        <a href="https://keyolk.github.io/security/vulnerability/cve-2016-9962/">
        CVE-2016-9962
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security/openscap/" title="openscap" class="dd-item ">
        <a href="https://keyolk.github.io/security/openscap/">
        openscap
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/security/rootkit/" title="rootkit" class="dd-item ">
        <a href="https://keyolk.github.io/security/rootkit/">
        rootkit
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/language/" title="Language" class="dd-item 
        
        
        
        ">
      <a href="https://keyolk.github.io/language/">
          Language
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/language/functional_programming/" title="functional programming" class="dd-item ">
        <a href="https://keyolk.github.io/language/functional_programming/">
        functional programming
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/language/lambda/" title="lambda" class="dd-item ">
        <a href="https://keyolk.github.io/language/lambda/">
        lambda
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/language/regular_expression/" title="regular expression" class="dd-item ">
        <a href="https://keyolk.github.io/language/regular_expression/">
        regular expression
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/language/shellscript/" title="shellscript" class="dd-item ">
        <a href="https://keyolk.github.io/language/shellscript/">
        shellscript
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li class="" role=""> 
                  <a class="padding" href="https://github.com/keyolk"><i class='fa fa-github'></i> GitHub</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://linkedin.com/in/keyolk"><i class='fa fa-linkedin'></i> LinkedIn</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable sticky-parent">
              
              <div class="sticky-spacer">
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" href="http://prose.io/#keyolk/keyolk.github.io/edit/hugo/content/system/linux/namespace.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='https://keyolk.github.io/'>keyolk's page</a> > <a href='https://keyolk.github.io/system/'>System</a> > <a href='https://keyolk.github.io/system/linux/'>linux</a> > namespace
          
         
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#mount">Mount</a>
<ul>
<li>
<ul>
<li><a href="#user-view">User View</a></li>
<li><a href="#kernel-view">Kernel View</a></li>
</ul></li>
</ul></li>
<li><a href="#uts">UTS</a>
<ul>
<li>
<ul>
<li><a href="#user-view-1">User View</a></li>
<li><a href="#kernel-view-1">Kernel View</a></li>
</ul></li>
</ul></li>
<li><a href="#ipc">IPC</a>
<ul>
<li>
<ul>
<li><a href="#kernel-view-2">Kernel View</a></li>
</ul></li>
</ul></li>
<li><a href="#pid">PID</a>
<ul>
<li>
<ul>
<li><a href="#user-view-2">User View</a></li>
<li><a href="#kernel-view-3">Kernel View</a></li>
</ul></li>
</ul></li>
<li><a href="#net">Net</a>
<ul>
<li>
<ul>
<li><a href="#user-view-3">User View</a></li>
<li><a href="#kernel-view-4">Kernel View</a></li>
</ul></li>
</ul></li>
<li><a href="#cgroup">CGroup</a></li>
<li><a href="#reference">Reference</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>namespace</h1>
          

        



<p>Namespace를 통해 Kernel 내 Global Resource에 대해 Process 별로 Partitioning을 제공한다. <br />
 기본적으로 Parent Process의 Namespace를 Child 에서 상속받는다.</p>

<table>
<thead>
<tr>
<th>Namespace</th>
<th>Constant</th>
<th>Related Resource</th>
<th>Supporting Version</th>
</tr>
</thead>

<tbody>
<tr>
<td>Mount</td>
<td>CLONE_NEWNS</td>
<td>Mount Points</td>
<td>2.4.19</td>
</tr>

<tr>
<td>UTS</td>
<td>CLONE_NEWUTS</td>
<td>Hostname, NIS domain name</td>
<td>2.6.24</td>
</tr>

<tr>
<td>IPC</td>
<td>CLONE_NEWIPC</td>
<td>SystemV IPC, POSIX Message Queue</td>
<td>2.6.24</td>
</tr>

<tr>
<td>PID</td>
<td>CLONE_NEWPID</td>
<td>Process IDs</td>
<td>2.6.24</td>
</tr>

<tr>
<td>Net</td>
<td>CLONE_NEWNET</td>
<td>Network Stacks</td>
<td>2.6.29</td>
</tr>

<tr>
<td>User</td>
<td>CLONE_NEWUSER</td>
<td>Network Stacks</td>
<td>3.8</td>
</tr>

<tr>
<td>CGroup</td>
<td>CLONE_NEWCGROUP</td>
<td>Network Stacks</td>
<td>4.6</td>
</tr>
</tbody>
</table>

<p>아래 System Call을 통해 Namespace를 다룰 수 있다.</p>

<ul>
<li>clone()</li>
<li>unshare()</li>
<li>setns()</li>
</ul>

<p>User를 제외한 5가지 Namespace에 대해선 CAP_SYS_ADMIN capabilities가 필요하다. <br />
모든 Process는 procfs에서 아래와 같이 namespace 정보를 inode 형태로 가지고 있다. <br />
같은 namespace에 속한 process는 같은 inode 값을 갖는다.</p>

<pre><code class="language-bash">$ ls -l /proc/$$/ns
total 0
lrwxrwxrwx. 1 mtk mtk 0 Jan 14 01:20 ipc -&gt; ipc:[4026531839]
lrwxrwxrwx. 1 mtk mtk 0 Jan 14 01:20 mnt -&gt; mnt:[4026531840]
lrwxrwxrwx. 1 mtk mtk 0 Jan 14 01:20 net -&gt; net:[4026531956]
lrwxrwxrwx. 1 mtk mtk 0 Jan 14 01:20 pid -&gt; pid:[4026531836]
lrwxrwxrwx. 1 mtk mtk 0 Jan 14 01:20 user -&gt; user:[4026531837]
lrwxrwxrwx. 1 mtk mtk 0 Jan 14 01:20 uts -&gt; uts:[4026531838]
</code></pre>

<p>위 file에 대한 bind mount가 이뤄지면, <br />
namespace 내에 속한 모든 process가 terminated 된다고 해도 namespace가 사라지지 않는다. <br />
이 때 해당하는 file descriptor를 setns()를 통해 다른 process로 전달하면 <br />
해당 process를 주어진 namespace에 할당해 줄 수 있다.</p>

<p>Kernel이 아래 configuration을 통해 namespace가 지원된다.</p>

<ul>
<li>CONFIG_NAMESPACES</li>
<li>CONFIG_UTS_NS</li>
<li>CONFIG_IPC_NS</li>
<li>CONFIG_PID_NS</li>
<li>CONFIG_NET_NS</li>
<li>CONFIG_USER_NS</li>
<li>CONFIG_CGROUP_NS</li>
</ul>

<p>task가 속한 namespace에 대한 접근은 <br />
task_struct의 filed인 nsproxy를 통해서 이뤄진다.</p>

<p>struct task_struct : <a href="http://lxr.free-electrons.com/source/include/linux/sched.h?v=4.0#L1278">http://lxr.free-electrons.com/source/include/linux/sched.h?v=4.0#L1278</a> <br />
struct nsproxy *nsproxy : <a href="http://lxr.free-electrons.com/source/include/linux/sched.h?v=4.0#L1467">http://lxr.free-electrons.com/source/include/linux/sched.h?v=4.0#L1467</a></p>

<p>nsproxy 구조체 내에 usernamespace를 제외한 5가지 namespace에 대한 pointer가 존재한다. <br />
struct ns_proxy : <a href="http://lxr.free-electrons.com/source/include/linux/nsproxy.h?v=4.0#L29">http://lxr.free-electrons.com/source/include/linux/nsproxy.h?v=4.0#L29</a></p>

<p>usernamespace 는 task의 filed 인 cred 내에서 찾아볼 수 있다.</p>

<p>struct cred : <a href="http://lxr.free-electrons.com/source/include/linux/cred.h?v=4.0#L103">http://lxr.free-electrons.com/source/include/linux/cred.h?v=4.0#L103</a> struct user_namespace *user_ns : <a href="http://lxr.free-electrons.com/source/include/linux/cred.h?v=4.0#L137">http://lxr.free-electrons.com/source/include/linux/cred.h?v=4.0#L137</a> </p>

<p>아래에서 namespace를 만드는 function을 확인할 수 있다.
create_new_namespaces() : <a href="http://lxr.free-electrons.com/source/kernel/nsproxy.c?v=4.0#L59">http://lxr.free-electrons.com/source/kernel/nsproxy.c?v=4.0#L59</a> </p>

<p>task는 따로 명시되지 않아도 default로 global namespace에 속해있다.</p>

<p>struct nsproxy init_nsproxy : <a href="http://lxr.free-electrons.com/source/kernel/nsproxy.c?v=4.0#L31">http://lxr.free-electrons.com/source/kernel/nsproxy.c?v=4.0#L31</a> <br />
do_fork() : <a href="http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1631">http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1631</a> <br />
p = copy_process() : <a href="http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1659">http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1659</a> <br />
copy_process() : <a href="http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1190">http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1190</a> <br />
retval = copy_namespaces() : <a href="http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1398">http://lxr.free-electrons.com/source/kernel/fork.c?v=4.0#L1398</a> <br />
copy_namesapces() : <a href="http://lxr.free-electrons.com/source/include/linux/nsproxy.h?v=4.0#L65">http://lxr.free-electrons.com/source/include/linux/nsproxy.h?v=4.0#L65</a> <br />
copy_namesapces() : <a href="http://lxr.free-electrons.com/source/kernel/nsproxy.c?v=4.0#L124">http://lxr.free-electrons.com/source/kernel/nsproxy.c?v=4.0#L124</a> </p>

<h2 id="mount">Mount</h2>

<p>Mount Point에 대한 isolation을 제공한다.</p>

<p>새로 mount namspace에선 생성 시점 이전에 생성된 mount들이 모두 visible하다.
새로 생성된 mount namspace 내에 mount와 unmount는 다른 system에서 invisible하다.
rootfs 를 다시 mount 하여 chroot와 비슷한 효과를 가져올 수 있다.</p>

<p><img src="https://uploads.toptal.io/blog/image/677/toptal-blog-image-1416545619045.png" alt="alt tag" /></p>

<h4 id="user-view">User View</h4>

<pre><code class="language-bash">root$ mkdir test

root$ mount -t tmpfs none test

root$ mount | grep test
none /root/test/test tmpfs rw,relatime 0 0
  
root$ unshare -pmrf /bin/sh
unshared$ mkdir test2
unshared$ mount -t tmpfs none test2
unshared$ cat /proc/mounts | grep test
none /root/test/test tmpfs rw,relatime 0 0
none /root/test/test2 tmpfs rw,nodev,relatime 0 0
  
root$ cat /proc/mounts | grep test
none /root/test/test tmpfs rw,relatime 0 0
</code></pre>

<p>기본적으로 parent에서 가지고 있는 mount table은 child로 상속되지만, <br />
아래와 같은 mount flag를 통해서 이를 제어할 수 있다.</p>

<ul>
<li>&ndash;make-rprivate</li>
<li>&ndash;make-rshared</li>
</ul>

<p>기존 mount entry에 대한 shared flag 여부는 아래와 같이 알아 볼 수 있다.</p>

<pre><code class="language-bash">$ cat /proc/self/mountinfo | grep shared
...
33 1 8:3 / / rw,relatime shared:1 - ext4 /dev/sda3 rw,data=ordered
...

</code></pre>

<p>shared subtree는 2005년에 Ram Pai를 통해 patch가 만들어졌다. <br />
mount에 아래와 같은 flag가 추가되었으며,</p>

<ul>
<li>–make-slave</li>
<li>–make-rslave</li>
<li>–make-unbindable</li>
<li>–make-runbindable</li>
<li>&hellip;</li>
</ul>

<p>마찬가지로 kernel에 아래와 같은 이름으로 flag가 추가되었다.</p>

<ul>
<li>MS_UNBINDABLE</li>
<li>MS_PRIVATE</li>
<li>MS_SLAVE</li>
<li>MS_SHARED</li>
</ul>

<h4 id="kernel-view">Kernel View</h4>

<p>관련 자료구조는 아래와 같다.</p>

<p>struct mnt_namespace : <a href="http://lxr.free-electrons.com/source/fs/mount.h?v=4.0#L7">http://lxr.free-electrons.com/source/fs/mount.h?v=4.0#L7</a> <br />
copy_mnt_ns() : <a href="http://lxr.free-electrons.com/source/fs/namespace.c?v=4.0#L2681">http://lxr.free-electrons.com/source/fs/namespace.c?v=4.0#L2681</a> <br />
new = copy_tree() : <a href="http://lxr.free-electrons.com/source/fs/namespace.c?v=4.0#L2709">http://lxr.free-electrons.com/source/fs/namespace.c?v=4.0#L2709</a> <br />
copy_tree() : <a href="http://lxr.free-electrons.com/source/fs/namespace.c?v=4.0#L1590">http://lxr.free-electrons.com/source/fs/namespace.c?v=4.0#L1590</a></p>

<h2 id="uts">UTS</h2>

<p>Hostname과 NIS domain name 에 대한 isolation을 제공한다. <br />
sethostname(), setdomainname() 으로 해당 값을 설정할 수 있으며, <br />
uname(), gethostname(), getdomainname() 으로 현재 할당된 값을 확인할 수 있다.</p>

<h4 id="user-view-1">User View</h4>

<pre><code class="language-bash">root$ uname -n
old

root$ unshare -u /bin/bash

unshared$ hostname new

unshared$ uname -n
new

unshared$ exit

root$ uname -n
old
</code></pre>

<h4 id="kernel-view-1">Kernel View</h4>

<p>관련 자료구조는 아래와 같다.</p>

<p><a href="http://lxr.free-electrons.com/source/include/linux/utsname.h?v=4.0#L23">http://lxr.free-electrons.com/source/include/linux/utsname.h?v=4.0#L23</a> <br />
<a href="http://lxr.free-electrons.com/source/include/uapi/linux/utsname.h?v=4.0#L24">http://lxr.free-electrons.com/source/include/uapi/linux/utsname.h?v=4.0#L24</a> </p>

<p>기존 gethostname 구현, <br />
<a href="http://lxr.free-electrons.com/source/kernel/sys.c?v=2.4.37#L1056">http://lxr.free-electrons.com/source/kernel/sys.c?v=2.4.37#L1056</a> <br />
여기서 system_utsname 이 global value 이다.</p>

<p>utsname 위한 새 function 추가, <br />
<a href="http://lxr.free-electrons.com/source/include/linux/utsname.h?v=4.0#L72">http://lxr.free-electrons.com/source/include/linux/utsname.h?v=4.0#L72</a> </p>

<p>새로운 gethostname() 구현, <br />
<a href="http://lxr.free-electrons.com/source/kernel/sys.c?v=4.0#L1239">http://lxr.free-electrons.com/source/kernel/sys.c?v=4.0#L1239</a> </p>

<p>비슷한 구현이 uname(), sethostname()에 적용되었다.
uname : <a href="http://lxr.free-electrons.com/source/kernel/sys.c?v=4.0#L1139">http://lxr.free-electrons.com/source/kernel/sys.c?v=4.0#L1139</a> <br />
sethostname : <a href="http://lxr.free-electrons.com/source/kernel/sys.c?v=4.0#L1213">http://lxr.free-electrons.com/source/kernel/sys.c?v=4.0#L1213</a></p>

<h2 id="ipc">IPC</h2>

<p>IPC resource(System V IPC와 POSIX message queue)에 대한 isolation을 제공한다. <br />
IPC namespace는 SYSTEM V IPC identifier와 POSIX message queue filesystem을 들을 갖고 있다. <br />
위 IPC는 kernel내 아래 2개 configuration으로 정의된다. </p>

<ul>
<li>CONFIG_POSIX_MQUEUE</li>
<li>CONFIG_SYSVIPC</li>
</ul>

<p>IPC namespace가 destroyed 되면, <br />
속한 모든 IPC object는 자동적으로 destroyed된다.</p>

<p>격리되는 IPC 자원들은 procfs에서 확인할 수 있다. <br />
아래 procfs의 interface들은 IPC namespace별로 구별된다.</p>

<ul>
<li>/proc/sys/fs/mqueue/ : POSIX message queue

<ul>
<li>msg_default</li>
<li>msg_max</li>
<li>msgsize_default</li>
<li>queues_max</li>
</ul></li>
<li>/proc/sys/kernel/ : System V IPC

<ul>
<li>msgmax</li>
<li>msgmnb</li>
<li>msgmni</li>
<li>sem</li>
<li>shmall</li>
<li>shmmax</li>
<li>shmmni</li>
<li>shm_rmid_forced</li>
</ul></li>
<li>/proc/sysvipc/ : System V IPC

<ul>
<li>msb</li>
<li>sem</li>
<li>shm</li>
</ul></li>
</ul>

<pre><code class="language-bash"># ipcmk -Q
Message queue id: 0
  
# ipcs -q
  
------ Message Queues --------
key        msqid      owner      perms      used-bytes   messages
0xd2489e5b 65536      root       644        0            0
  
# unshare -if /bin/sh
# ipcs -q
  
------ Message Queues --------
key        msqid      owner      perms      used-bytes   messages
</code></pre>

<h4 id="kernel-view-2">Kernel View</h4>

<p>관련 자료구조는 아래와 같다.</p>

<p><a href="http://lxr.free-electrons.com/source/include/linux/ipc_namespace.h?v=4.0#L21">http://lxr.free-electrons.com/source/include/linux/ipc_namespace.h?v=4.0#L21</a></p>

<h2 id="pid">PID</h2>

<p>PID에 대한 isolation을 제공한다.</p>

<ul>
<li>새로운 namespace에서 생성된 최초의 task는 pid가 1이 된다.</li>
<li>parent namespace에서 자식의 모든 pid를 볼 수 있다.</li>
<li>Init process와 유사한 동작을 보인다.

<ul>
<li>child reaping : 한 process가 죽으면 모든 children 은 부모가 PID 1번이 된다.</li>
<li>동일 namespace의 다른 process가 prctl()을 통해 PR_SET_CHILD_SUBREAPER 설정이 되어있지 않을 때에 한한다.</li>
<li>SIGKILL signal은 PID 1번 process를 죽일 수 없다.</li>
</ul></li>
<li>PID namespace 내의 init process가 terminated 되면 해당 namespace 내의 모든 process가 종료된다.</li>
<li>32회까지 nested 될 수 있다.</li>
</ul>

<p><img src="https://uploads.toptal.io/blog/image/674/toptal-blog-image-1416487554032.png" alt="alt tag" /></p>

<h4 id="user-view-2">User View</h4>

<pre><code class="language-bash">$ pstree -p
systemd(1)-+-agetty(200)
           |-agetty(201)
           |-avahi-daemon(274)---avahi-daemon(276)
           |-dbus-daemon(197)
           |-docker(202)-+-{docker}(207)
           |             |-{docker}(208)
           |             |-{docker}(209)
           |             |-{docker}(210)
           |             |-{docker}(216)
           |             |-{docker}(277)
           |             |-{docker}(278)
           |             |-{docker}(279)
           |             |-{docker}(280)
           |             |-{docker}(281)
           |             |-{docker}(282)
           |             `-{docker}(283)
           |-haveged(194)
           |-nmbd(212)
           |-smbd(236)-+-smbd(272)
           |           `-smbd(15603)
           |-sshd(204)---sshd(5079)---bash(5085)---pstree(5088)
           |-systemd(5081)---(sd-pam)(5082)
           |-systemd-journal(119)
           |-systemd-logind(196)
           |-systemd-resolve(206)
           |-systemd-timesyn(189)---{sd-resolve}(191)
           `-systemd-udevd(140)
  
# unshare -pf --mount-proc /bin/sh
$ pstree -p
sh(1)---pstree(2)
</code></pre>

<h4 id="kernel-view-3">Kernel View</h4>

<p>관련 자료구조는 아래와 같다.</p>

<p>struct pid_namespace : <a href="http://lxr.free-electrons.com/source/include/linux/pid_namespace.h?v=4.0#L24">http://lxr.free-electrons.com/source/include/linux/pid_namespace.h?v=4.0#L24</a> <br />
MAX_PID_NS_LEVEL : <a href="http://lxr.free-electrons.com/source/kernel/pid_namespace.c?v=4.0#L80">http://lxr.free-electrons.com/source/kernel/pid_namespace.c?v=4.0#L80</a> <br />
struct upid : <a href="http://lxr.free-electrons.com/source/include/linux/pid.h?v=4.1#L50">http://lxr.free-electrons.com/source/include/linux/pid.h?v=4.1#L50</a> <br />
struct pid : <a href="http://lxr.free-electrons.com/source/include/linux/pid.h?v=4.1#L57">http://lxr.free-electrons.com/source/include/linux/pid.h?v=4.1#L57</a> </p>

<p>특정 process를 kill하는 scenario를 생각해보자, \
signal을 통해서 결과적으로 kernel 내에 아래 function을 부르게 될것이다. </p>

<p>kill_something_info() : <a href="http://lxr.free-electrons.com/source/kernel/signal.c?v=4.1#L1425">http://lxr.free-electrons.com/source/kernel/signal.c?v=4.1#L1425</a>  <br />
이 function 내에는 아래와 같은 subroutine이 있다. <br />
kill_pid_info() : <a href="http://lxr.free-electrons.com/source/kernel/signal.c?v=4.1#L1431">http://lxr.free-electrons.com/source/kernel/signal.c?v=4.1#L1431</a> <br />
kill_pid_info() : <a href="http://lxr.free-electrons.com/source/kernel/signal.c?v=4.1#L1339">http://lxr.free-electrons.com/source/kernel/signal.c?v=4.1#L1339</a> <br />
find_vpid() : <a href="http://lxr.free-electrons.com/source/kernel/pid.c#L380?v=4.1#L380">http://lxr.free-electrons.com/source/kernel/pid.c#L380?v=4.1#L380</a> <br />
find_pid_ns() : find_vpid() : <a href="http://lxr.free-electrons.com/source/kernel/pid.c#L380?v=4.1#L382">http://lxr.free-electrons.com/source/kernel/pid.c#L380?v=4.1#L382</a> <br />
param인 *pid로 find_vpid()를 통해 struct pid를 가져온다.</p>

<h2 id="net">Net</h2>

<p>Network Stack에 대한 Isolation을 제공한다.</p>

<ul>
<li>새로 생성된 namespace 엔 loopback 만 존재한다.</li>
<li>다른 namespace의 device를 가져올 수 있다.</li>
<li>socket과 device는 하나의 namespace에만 속할 수 있다.</li>
<li>namespace간의 통신은 veth를 통해 이뤄질 수 있다.</li>
</ul>

<p><img src="https://uploads.toptal.io/blog/image/675/toptal-blog-image-1416487605202.png" alt="alt tag" /></p>

<h4 id="user-view-3">User View</h4>

<pre><code class="language-bash"># ip a
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether b8:27:eb:43:56:26 brd ff:ff:ff:ff:ff:ff
    inet 192.168.137.2/24 brd 192.168.137.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::ba27:ebff:fe43:5626/64 scope link
       valid_lft forever preferred_lft forever
3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default
    link/ether 00:00:00:00:00:00 brd ff:ff:ff:ff:ff:ff
    inet 172.17.42.1/16 scope global docker0
       valid_lft forever preferred_lft forever
    inet6 fe80::fc45:45ff:fec7:1756/64 scope link
       valid_lft forever preferred_lft forever
  
# unshare -nf /bin/sh
$ ip a
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN group default
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</code></pre>

<p>2개의 namespace를 만든다.</p>

<pre><code class="language-bash">$ ip netns add myns1
$ ip netns add myns2
</code></pre>

<p>myns1 namespace를 지운다.</p>

<pre><code class="language-bash">$ ip netns del myns1
</code></pre>

<p>namespace를 지우면 모든 migratable한 network device 들은 default network namespace로 할당된다. <br />
아래 명령을 사용하여 network namespace를 monitoring 할 수 있다.</p>

<pre><code class="language-bash">$ ip netns monitor
</code></pre>

<p>아래 명령을 통해 현재 존재하는 network namespace를 list up 할 수 있다.</p>

<pre><code class="language-bash">$ ip netns list
</code></pre>

<p>위 명령은 /var/run/netns/ 를 읽게끔 되어있다.
특정 namespace에 속한 process의 id를 아래 명령으로 list 할 수 있다.</p>

<pre><code class="language-bash">$ ip netns pid [namespace_name]
</code></pre>

<p>마찬가지로 특정 pid가 속한 namespace도 알 수 있다.</p>

<pre><code class="language-bash">$ ip netns identify [pid]
</code></pre>

<p>특정 network interface를 namespace로 할당해 줄 수 있다.</p>

<pre><code class="language-bash">$ ip link set eth0 netns myns1
</code></pre>

<p>dev_change_net_namespace() : <a href="http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L2971">http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L2971</a> <br />
shell을 실행하면서 새로운 namespace에 할당해 줄 수 있다.</p>

<pre><code class="language-bash">$ ip netns exec myns1 bash
</code></pre>

<p>namespace 내에서 ifconfig -a로 검사하면 eth0과 loopback만 존재하는걸 확인할 수 있다.
network device에 대해서 inital namespace 설정을 persist 하게 수정할 수 있다.</p>

<pre><code class="language-bash">$ ip link set eth0 netns1
</code></pre>

<h4 id="kernel-view-4">Kernel View</h4>

<p>관련 자료 구조는 아래와 같다.</p>

<p>struct net : <a href="http://lxr.free-electrons.com/source/include/net/net_namespace.h?v=4.0#L44">http://lxr.free-electrons.com/source/include/net/net_namespace.h?v=4.0#L44</a> <br />
network stack 전체가 담겨있다.</p>

<ul>
<li>looback device</li>
<li>SNMP stat (netns_mib)</li>
<li>all network tables : routing, neighboring, etc …</li>
<li>all sockets</li>
<li>/procfs entries</li>
<li>/sysfs entries</li>
</ul>

<p>하나의 network device는 반드시 하나의 network namspace에 속한다. <br />
struct net_device : <a href="http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L1499">http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L1499</a> <br />
<a href="http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L1706">http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L1706</a> </p>

<p>related function :</p>

<ul>
<li>dev_net() : <a href="http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L1839">http://lxr.free-electrons.com/source/include/linux/netdevice.h?v=4.0#L1839</a></li>
</ul>

<p>하나의 socket은 반드시 하나의 network namspace에 속한다. <br />
struct sock : <a href="http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L301">http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L301</a> <br />
<a href="http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L306">http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L306</a> <br />
struct sock_common : <a href="http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L158">http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L158</a> <br />
<a href="http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L194">http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L194</a> </p>

<p>related function :</p>

<ul>
<li>sock_net() : <a href="http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L2162">http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L2162</a></li>
<li>sock_net_set() : <a href="http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L2168">http://lxr.free-electrons.com/source/include/net/sock.h?v=4.0#L2168</a></li>
</ul>

<p>system에 존재하는 모든 network namspaces를 담는 list가 추가되었다. <br />
<a href="http://lxr.free-electrons.com/source/include/net/net_namespace.h#L160">http://lxr.free-electrons.com/source/include/net/net_namespace.h#L160</a> <br />
struct list_head net_namespace_list : <a href="http://lxr.free-electrons.com/source/net/core/net_namespace.c?v=4.0#L33">http://lxr.free-electrons.com/source/net/core/net_namespace.c?v=4.0#L33</a> <br />
<a href="http://lxr.free-electrons.com/source/net/core/net_namespace.c?v=4.0#L34">http://lxr.free-electrons.com/source/net/core/net_namespace.c?v=4.0#L34</a></p>

<p>해당 list를 traverse 하는 macro도 추가되었다. <br />
for_each_net() : <a href="http://lxr.free-electrons.com/source/include/net/net_namespace.h?v=4.0#L276">http://lxr.free-electrons.com/source/include/net/net_namespace.h?v=4.0#L276</a> <br />
initial network namesapce인 init_net은 loopback device와 모든 physical device, networking table 등을 갖고 있다. <br />
<a href="http://lxr.free-electrons.com/source/include/net/net_namespace.h?v=4.0#L140">http://lxr.free-electrons.com/source/include/net/net_namespace.h?v=4.0#L140</a> <br />
struct net init_net : <a href="http://lxr.free-electrons.com/source/net/core/net_namespace.c?v=4.0#L36">http://lxr.free-electrons.com/source/net/core/net_namespace.c?v=4.0#L36</a> <br />
init_net 또한 struct net의 instance이다. <br />
새로 생성되는 각각의 network namespace는 오직 loopback device 만을 가지고 있다. <br />
socket은 가지고 있지 않다.</p>

<h2 id="cgroup">CGroup</h2>

<h2 id="reference">Reference</h2>

<p><a href="http://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces">http://www.toptal.com/linux/separation-anxiety-isolating-your-system-with-linux-namespaces</a> <br />
<a href="https://blog.jtlebi.fr/2013/12/22/introduction-to-linux-namespaces-part-1-uts/">https://blog.jtlebi.fr/2013/12/22/introduction-to-linux-namespaces-part-1-uts/</a> <br />
<a href="http://crosbymichael.com/creating-containers-part-1.html">http://crosbymichael.com/creating-containers-part-1.html</a> <br />
<a href="http://www.lizhaozhong.info/archives/tag/namespace">http://www.lizhaozhong.info/archives/tag/namespace</a> <br />
<a href="http://www.cnblogs.com/blueswu/p/3566307.html">http://www.cnblogs.com/blueswu/p/3566307.html</a></p>

<hr>
<footer class=" footline">
  
  written by <i class='fa fa-user'></i> <a href="mailto:keyolk@gmail.com">keyolk</a>
  
  on <i class='fa fa-calendar'></i> 28/09/2017
  
  
</footer>
<div id="disqus_thread"></div>
<script type="text/javascript">
(function() {
    
    
    if (window.location.hostname == "localhost")
        return;
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'keyolk';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="https://keyolk.github.io/system/linux/metric/" title="metric"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="https://keyolk.github.io/system/linux/proxy/" title="proxy" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://keyolk.github.io/js/clipboard.min.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/perfect-scrollbar.min.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/perfect-scrollbar.jquery.min.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/jquery.sticky-kit.min.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/featherlight.min.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/html5shiv-printshiv.min.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/highlight.pack.js?1551920894"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://keyolk.github.io/js/modernizr.custom.71422.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/learn.js?1551920894"></script>
    <script src="https://keyolk.github.io/js/hugo-learn.js?1551920894"></script>

    <link href="https://keyolk.github.io/mermaid/mermaid.css?1551920894" type="text/css" rel="stylesheet" />
    <script src="https://keyolk.github.io/mermaid/mermaid.js?1551920894"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-77710672-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

